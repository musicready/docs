---
title: "Appendix: Grammar Summary"
description: "Key productions for MRS-S and Working Set Envelopes."
---

See: [`/MRS-Specification-RFC#appendix-a-complete-grammar`](/MRS-Specification-RFC#appendix-a-complete-grammar)

## MRS-S Key Productions

```peg
document  <- '(' 'mrs-s' version meta parts measures spans? overlays? layout? ')'
measure   <- '(' 'measure' ':id' uuid ':number' INT measure-attrs* part-content* ')'
event     <- '(' ':' beat pitch-expr ':id' uuid ':at' rational properties* ')'
pitch     <- STEP ACCIDENTAL? OCTAVE '.' DURATION
chord     <- '[' pitch+ ']' '.' DURATION
span      <- '(' span-type ':id' uuid ':from' uuid ':to' uuid attributes* ')'
uuid      <- '#uuid' '"' UUID-STRING '"'
```

## Working Set Envelope Key Productions

```peg
envelope  <- '(' 'working-set' version scope context? constraints? 
             ':content' mrs-s-fragment context-rings* ')'
response  <- '(' 'working-set-response' version scope 
             ':content' mrs-s-fragment rationale? ')'
scope     <- ':scope' '(' ':measures' uuid uuid ')' '(' ':parts' '[' part-id* ']' ')'
```

The `:content` of both envelope and response is valid MRS-Sâ€”no separate grammar required.
